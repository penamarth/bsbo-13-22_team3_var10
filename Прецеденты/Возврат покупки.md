# Прецедент: Возврат покупки

**Основной исполнитель**: Покупатель

**Заинтересованные лица и их требования**:
-   Покупатель. Требует быстро и удобно выбрать подходящий матч, место и купить билет. Ожидает возможности проверки информации перед покупкой. Также требует получить билет после оплаты или использовать абонемент, если он есть.
-   Платёжная система. Требует запросы на авторизацию в корректном формате и своевременно обрабатывает их.
-   Бухгалтерская система. Хочет получать данные о продажах для учёта и регистрации транзакций.

**Предусловия**:
-   Клиент идентифицирован и аутентифицирован.
-   У клиента есть действующий билет или абонемент, который можно вернуть согласно правилам.

**Результаты (Постусловия)**:
-   Билет или абонемент успешно аннулирован.
-   Деньги возвращены клиенту.
-   Информация о возврате сохранена в бухгалтерской системе.

## Основной сценарий (возврат билета)
1. Клиент вводит идентификатор билета (Метод ReturnTicket())
1. Система показывает информацию для перепроверки
1. Клиент подтверждает возврат
1. Система проводит проверку для одобрения возврата
1. Билет аннулируется
1. Система возвращает клиенту деньги (Класс AdapterTransactionPayment())

## Основной сценарий (возврат абонемента)
1. Клиент посылает идентификатор абонемента (Метод ReturnSeasonTicket())
1. Система выдаёт информацию клиенту для перепроверки
1. Клиент подтверждает возврат
1. Система проводит проверку по критериям, чтобы она могла одобрить возврат
1. Система возвращает успешную проверку
1. Абонемент аннулируется
1. Система возвращает клиенту часть потраченных средств (Класс AdapterTransactionPayment())

## Альтернативные сценарии:

- **Абонемент или билет недействителен:** В случае обнаружения истечения срока у билета или абонемента, система прерывает процесс возврата билета 
